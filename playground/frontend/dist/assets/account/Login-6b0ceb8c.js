import{d as e,r as s,a as r,c as l,u as t,o as a,b as o,e as i,f as n,g as d,n as c,h as u,t as m,i as p,w as g,F as v,j as h,T as f,U as x,k as w,v as b,l as y,R as _,m as k,p as $}from"./index-f92b2378.js";import{u as V,r as C,a as j,e as S,b as z}from"./validators-e255ce09.js";import{u as L}from"./locale-path-0704f3d3.js";const U={class:"grow min-h-full py-4 sm:py-12 sm:px-6 lg:px-8 grid content-center"},q={class:"mb-16 md:mb-24"},B={class:"sm:mx-auto sm:w-full sm:max-w-2xl text-center space-x-2 mb-4"},M=["src"],R={class:"mt-4 sm:mx-auto sm:w-full sm:max-w-lg drop-shadow-2xl"},T={class:"bg-white py-6 px-4 shadow sm:rounded-lg sm:px-10"},A={class:"text-center text-2xl font-bold"},F={class:"space-y-5 pt-2",action:"",method:"POST"},H={key:0,class:"rounded-md bg-red-50 p-4 mt-4 -mx-2"},G={class:"flex"},X={class:"flex-shrink-0"},O={key:0,class:"ml-3 text-sm font-medium text-red-800"},P={class:"mt-4"},W={class:"flex items-center justify-between"},D={class:"flex items-center"},E={for:"remember-me",class:"ml-2 block text-sm text-gray-900"},I={class:"text-sm"},J=["onClick","disabled"],K={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},N=[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)],Q={class:"mt-6"},Y={class:"relative"},Z=n("div",{class:"absolute inset-0 flex items-center"},[n("div",{class:"w-full border-t border-gray-300"})],-1),ee={class:"relative flex justify-center text-sm"},se={class:"px-2 bg-white text-gray-500"},re={class:"mt-6 grid grid-cols-3 gap-3"},le=["title"],te={class:"sr-only"},ae=n("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z","clip-rule":"evenodd"})],-1),oe=["title"],ie={class:"sr-only"},ne=n("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 22.773 22.773"},[n("path",{d:"m15.769 0h0.162c0.13 1.606-0.483 2.806-1.228 3.675-0.731 0.863-1.732 1.7-3.351 1.573-0.108-1.583 0.506-2.694 1.25-3.561 0.69-0.808 1.955-1.527 3.167-1.687z"}),n("path",{d:"m20.67 16.716v0.045c-0.455 1.378-1.104 2.559-1.896 3.655-0.723 0.995-1.609 2.334-3.191 2.334-1.367 0-2.275-0.879-3.676-0.903-1.482-0.024-2.297 0.735-3.652 0.926h-0.462c-0.995-0.144-1.798-0.932-2.383-1.642-1.725-2.098-3.058-4.808-3.306-8.276v-1.019c0.105-2.482 1.311-4.5 2.914-5.478 0.846-0.52 2.009-0.963 3.304-0.765 0.555 0.086 1.122 0.276 1.619 0.464 0.471 0.181 1.06 0.502 1.618 0.485 0.378-0.011 0.754-0.208 1.135-0.347 1.116-0.403 2.21-0.865 3.652-0.648 1.733 0.262 2.963 1.032 3.723 2.22-1.466 0.933-2.625 2.339-2.427 4.74 0.176 2.181 1.444 3.457 3.028 4.209z"})],-1),de=["title"],ce={class:"sr-only"},ue=n("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 210 210"},[n("path",{"fill-rule":"evenodd",d:"M0,105C0,47.103,47.103,0,105,0c23.383,0,45.515,7.523,64.004,21.756l-24.4,31.696C133.172,44.652,119.477,40,105,40 c-35.841,0-65,29.159-65,65s29.159,65,65,65c28.867,0,53.398-18.913,61.852-45H105V85h105v20c0,57.897-47.103,105-105,105 S0,162.897,0,105z","clip-rule":"evenodd"})],-1),me=e({__name:"Login",setup(e){const me=L(),pe=s({username:"michael@mbict.com",password:"test",keepSession:!0}),ge=r(!1),ve=r(!1),he=$("whitelabel"),fe={color:he.logo_text},xe=l((()=>({username:{required:j,email:S},password:{required:j}}))),we=V(xe,pe),be={excessive_login_attempts:{title:"errors.excessive_login_attempts.title",description:"errors.excessive_login_attempts.description"},bad_credentials:{description:"errors.bad_credentials"},inactive_account:{title:"errors.inactive_account"},internal_server_error:{title:"errors.internal_server_error",description:"errors.description"}},ye=r(""),_e=l((()=>({general:$e(ye.value)}))),ke=t();function $e(e){if(!e)return null;if(be[e])return be[e];let s=ke.te("errors."+e+".title"),r=ke.te("errors."+e+".description");return s||r?{title:s?"errors."+e+".title":null,description:r?"errors."+e+".description":null}:{title:"errors.unknown_error",description:e}}a((()=>{"excessive_login_attempts"===ye.value&&Ce()}));let Ve=null;function Ce(){ge.value=!0,clearTimeout(Ve),Ve=setTimeout((()=>{ge.value=!1}),3e5)}function je(e){!0!==ve.value&&(ye.value=null,we.value.$validate(),we.value.$errors.length||(ve.value=!0,function(){const e={username:pe.username,password:pe.password,keep_session:pe.keepSession};let s=new URL(document.location);z.post(s.href,e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>{e.data.redirect?document.location.href=e.data.redirect:document.location.href="",ve.value=!1})).catch((e=>{if(ve.value=!1,e.response&&e.response.data.error)"excessive_login_attempts"===e.response.data.error?(Ce(),ye.value=e.response.data.error):ye.value=e.response.data.error;else if(e.response)switch(e.response.status){case 500:ye.value="errors.internal_server_error";break;case 404:case 502:case 503:case 504:ye.value="errors.temporary_unavailable";break;case 400:ye.value="errors.validation";break;default:ye.value=e.toLocaleString()}else ye.value=e.toLocaleString()}))}()))}return(e,s)=>{var r,l;return o(),i("div",U,[n("div",q,[n("div",B,[d(he).logo?(o(),i("img",{key:0,class:c(["w-auto inline drop-shadow",{"h-20":d(he).only_logo,"h-16":!d(he).only_logo}]),src:d(he).logo},null,10,M)):u("",!0),d(he).only_logo?u("",!0):(o(),i("span",{key:1,class:"text-4xl font-bold text-gray-800 drop-shadow align-middle stroke-1 stroke-black",style:fe},m(d(he).title),1))]),n("div",R,[n("div",T,[n("h2",A,m(e.$t("page.login.title:sign_in_to_your_account")),1),n("form",F,[p(f,{name:"fade"},{default:g((()=>[d(_e).general?(o(),i("div",H,[n("div",G,[n("div",X,[p(d(C),{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),n("div",null,[d(_e).general.title?(o(),i("h3",O,m(e.$t(d(_e).general.title)),1)):u("",!0),d(_e).general.description?(o(),i("div",{key:1,class:c(["ml-3 text-sm text-red-700",{"mt-2":d(_e).general.title}])},[(o(!0),i(v,null,h(e.$t(d(_e).general.description).split(/\n/g),(e=>(o(),i("p",null,m(e)+"Â ",1)))),256))],2)):u("",!0)])])])):u("",!0)])),_:1}),n("div",P,[p(d(x),{label:"form.username",name:"username",type:"email",modelValue:pe.username,"onUpdate:modelValue":s[0]||(s[0]=e=>pe.username=e),error:null==(r=d(we).username.$errors[0])?void 0:r.$message,placeholder:e.$t("form.username:placeholder")},null,8,["modelValue","error","placeholder"])]),n("div",null,[p(d(x),{label:"form.password",name:"password",type:"password",modelValue:pe.password,"onUpdate:modelValue":s[1]||(s[1]=e=>pe.password=e),error:null==(l=d(we).password.$errors[0])?void 0:l.$message,placeholder:e.$t("form.password:placeholder")},null,8,["modelValue","error","placeholder"])]),n("div",W,[n("div",D,[w(n("input",{id:"remember-me",name:"keep_session",type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=e=>pe.keepSession=e),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[b,pe.keepSession]]),n("label",E,m(e.$t("page.login.remember_me")),1)]),n("div",I,[p(d(_),{to:d(me)("recover"),class:"font-medium text-blue-600 hover:text-blue-500"},{default:g((()=>[y(m(e.$t("page.login.link:forgot_password_recovery")),1)])),_:1},8,["to"])])]),n("div",null,[n("button",{type:"submit",class:"w-full primary inline-flex justify-center",onClick:k(je,["prevent"]),disabled:ge.value},[ve.value?(o(),i("svg",K,N)):u("",!0),y(" "+m(e.$t("page.login.button:sign_in")),1)],8,J)])]),n("div",Q,[n("div",Y,[Z,n("div",ee,[n("span",se,m(e.$t("page.login.social_logins.title:or_continue_with")),1)])]),n("div",re,[n("div",null,[n("a",{href:"#",class:"w-full inline-flex justify-center py-3 px-3 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",title:e.$t("page.login.signin_with",{sso:"Facebook"})},[n("span",te,m(e.$t("page.login.signin_with",{sso:"Facebook"})),1),ae],8,le)]),n("div",null,[n("a",{href:"#",class:"w-full inline-flex justify-center py-3 px-3 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",title:e.$t("page.login.signin_with",{sso:"Apple"})},[n("span",ie,m(e.$t("page.login.signin_with",{sso:"Apple"})),1),ne],8,oe)]),n("div",null,[n("a",{href:"#",class:"w-full inline-flex justify-center py-3 px-3 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",title:e.$t("page.login.signin_with",{sso:"Google"})},[n("span",ce,m(e.$t("page.login.signin_with",{sso:"Google"})),1),ue],8,de)])])])])])])])}}});export{me as default};
